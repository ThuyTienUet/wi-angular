<div class="curve-listing-toolbar-wrapper">
	<wi-toolbar>
		<wi-button icon="plus-16x16" layout="icon-left" type="small" label='Add Curve' tooltip="Add Curve" handler="wiCurveListing.onAddCurveButtonClicked"></wi-button>
		<wi-button icon="save-16x16" layout="icon-left" type="small" label='Save Curve(s)' tooltip="Save Curve(s)" handler="wiCurveListing.onSaveButtonClicked"></wi-button>
	</wi-toolbar>
	<wi-toolbar>
		<wi-button layout="icon-left" type="small" label='Show Reference Window' is-check-type="1" checked='wiCurveListing.isShowRefWin'
		    tooltip="Show/Hide Reference" handler="wiCurveListing.toggleRefWin"></wi-button>
		<wi-button layout="icon-left" icon="ti-layout-tab-window" label='Reference Window' type="small" tooltip="Properties" handler="wiCurveListing.onRefWinBtnClicked"></wi-button>
	</wi-toolbar>
</div>
<div class="curve-listing-main-content">
	<div resizable r-directions="['right']" r-flex="true" class="listing">
		<div>
			<label class="col-sm-4">
				<span class="well-16x16"></span>&nbsp;Well
			</label>
			<div class="col-sm-8">
				<select class="form-control wi-form-control" ng-model='wiCurveListing.SelectedWell' ng-options="well as well.properties.name for well in wiCurveListing.wells"
				    ng-change="wiCurveListing.onChangeWell()"></select>
			</div>
		</div>
		<div>
			<table class="table table-bordered">
				<thead>
					<tr>
						<th style="flex:2">Name</th>
						<th style="flex:2">Dataset</th>
						<th style="flex:1">Select</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="curve in wiCurveListing.curvesArr track by curve.id"
					ng-class="{modified: curve.modified}">
						<td style="flex:2">{{curve.name}}
							<span class="fa fa-undo undo" ng-if="curve.modified" ng-click="wiCurveListing.reverseModified(curve.id)" title='Discard Changes'></span>
						</td>
						<td style="flex:2">{{curve.datasetName}}</td>
						<td style="flex:1;text-align:center">
							<input type="checkbox" ng-model="curve.selected" ng-change="wiCurveListing.onCurveSelectClick(curve)">
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div class="editing">
		<div id="output">
			<table class="table table-bordered" infinite-scroll="wiCurveListing.LoadMoreOutPut()" infinite-scroll-distance="2" infinite-scroll-container='"#output"'
			    infinite-scroll-listen-for-event='list:changeWell'>
				<thead>
					<tr>
						<th>Index</th>
						<th>Depth</th>
						<th ng-repeat="curve in wiCurveListing.curvesData[wiCurveListing.currentIndex]" ng-if="curve.show" title='{{curve.datasetName}}'>{{curve.name}}</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="row in wiCurveListing.loaded" ng-init="parentId = $index">
						<th>{{$index}}</th>
						<td>{{wiCurveListing.depthArr[$index]}}</td>
						<td ng-repeat="col in wiCurveListing.curvesData[wiCurveListing.currentIndex]" ng-if='col.show'
						ng-class="{'nanValue': wiCurveListing.isNaN(col.data[parentId])}">
							<input type="number" class='form-control wi-form-control editor' ng-model="col.data[parentId]" step="any" ng-change="col.edit = true;wiCurveListing.onModifyCurve(col.id);">
					</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div resizable r-directions="['left']" r-flex="true" ng-show="wiCurveListing.isShowRefWin" style="width: 20%; min-width: 10%; max-width: 30%">
		<!-- <wi-container name='RefCrossplotContainer' title='Reference' close-handler='wiCurveListing.isShowRefWin = false'>
          <wi-reference-window name="wiCurveListingRefWin">
          </wi-reference-window>
        </wi-container> -->
		refWin
	</div>
</div>