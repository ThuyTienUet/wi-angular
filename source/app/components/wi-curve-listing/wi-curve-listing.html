<div class="curve-listing-toolbar-wrapper">
	<wi-toolbar>
		<wi-button icon="plus-16x16" layout="icon-left" type="small" label='Add Curve' tooltip="Add Curve" handler="wiCurveListing.onAddCurveButtonClicked"></wi-button>
		<wi-button icon="save-16x16" layout="icon-left" type="small" label='Save Curve(s)' tooltip="Save Curve(s)" handler="wiCurveListing.onSaveButtonClicked"></wi-button>
	</wi-toolbar>
	<wi-toolbar>
		<wi-button layout="icon-left" type="small" label='Show Reference Window' is-check-type="1" checked='wiCurveListing.isShowRefWin'
		    tooltip="Show/Hide Reference" handler="wiCurveListing.toggleRefWin"></wi-button>
		<wi-button layout="icon-left" icon="ti-layout-tab-window" label='Reference Window' type="small" tooltip="Properties" handler="wiCurveListing.onRefWinBtnClicked"></wi-button>
	</wi-toolbar>
</div>
<div class="curve-listing-main-content">
	<div resizable r-directions="['right']" r-flex="true" class="listing">
		<div>
			<label class="col-sm-4">
				<span class="well-16x16"></span>&nbsp;Well
			</label>
			<div class="col-sm-8">
				<select class="form-control wi-form-control" ng-model='wiCurveListing.SelectedWell' ng-options="well as well.properties.name for well in wiCurveListing.wells"
				    ng-change="wiCurveListing.onChangeWell()"></select>
			</div>
		</div>
		<div>
			<table class="table table-bordered">
				<thead>
					<tr>
						<th style="flex:2">Name</th>
						<th style="flex:2">Dataset</th>
						<th style="flex:1">Select</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="curve in wiCurveListing.curvesArr track by curve.id"
					ng-class="{modified: curve.modified}">
						<td style="flex:2">{{curve.name}}
							<span class="fa fa-undo undo" ng-if="curve.modified" ng-click="wiCurveListing.reverseModified(curve.id)" title='Discard Changes'></span>
						</td>
						<td style="flex:2">{{curve.datasetName}}</td>
						<td style="flex:1;text-align:center">
							<input type="checkbox" ng-model="curve.selected" ng-change="wiCurveListing.onCurveSelectClick(curve)">
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div class="editing">
		<div class="fix-column">
			<div class="thead">
				<div class="trow">
					<!-- <div class="tcol">Index</div> -->
					<div class="tcol">Depth</div>
				</div>
				<div class="trow">
					<!-- <div class="tcol"></div> -->
					<div class="tcol">
						<input type="number" class='form-control wi-form-control editor' 
						ng-model="wiCurveListing.depthInput" placeholder="Go to ..."
						wi-enter='wiCurveListing.goToDepth()'>
					</div>
				</div>
			</div>
			<div class="tbody">
				<div ng-repeat="row in wiCurveListing.depthArr[wiCurveListing.currentIndex] track by $index" class="trow">
					<!-- <div class="tcol">{{$index}}</div> -->
					<div class="tcol">{{wiCurveListing.depthArr[wiCurveListing.currentIndex][$index]}}</div>
				</div>
			</div>
		</div>
		<div class="rest-columns">
			<div class="thead">
				<div class="trow">
					<div class="tcol" ng-repeat="curve in wiCurveListing.curvesData[wiCurveListing.currentIndex]" ng-if="curve.show">{{curve.datasetName}}</div>
				</div>
				<div class="trow">
					<div class="tcol" ng-repeat="curve in wiCurveListing.curvesData[wiCurveListing.currentIndex]" ng-if="curve.show">{{curve.name}}</div>
				</div>
			</div>
			<div id="output" class="tbody">
				<div ng-repeat="row in wiCurveListing.depthArr[wiCurveListing.currentIndex] track by $index" ng-init="parentId = $index" class="trow">
					<div  class="tcol" ng-repeat="col in wiCurveListing.curvesData[wiCurveListing.currentIndex]" ng-if='col.show'
					ng-class="{'nanValue': wiCurveListing.isNaN(col.data[parentId])}">
						<input type="number" class='form-control wi-form-control editor' ng-model="col.data[parentId]" step="any" ng-change="col.edit = true;wiCurveListing.onModifyCurve(col.id);">
					</div>
				</div>
			</div>
		</div>
	</div>
	<div resizable r-directions="['left']" r-flex="true" ng-show="wiCurveListing.isShowRefWin" style="width: 20%; min-width: 10%; max-width: 30%">
		<!-- <wi-container name='RefCrossplotContainer' title='Reference' close-handler='wiCurveListing.isShowRefWin = false'>
          <wi-reference-window name="wiCurveListingRefWin">
          </wi-reference-window>
        </wi-container> -->
		refWin
	</div>
</div>